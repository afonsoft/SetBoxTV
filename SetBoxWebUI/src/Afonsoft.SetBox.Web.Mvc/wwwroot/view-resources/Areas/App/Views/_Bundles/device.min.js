var translate={infos:"Exibindo {{ctx.start}} Até {{ctx.end}} de {{ctx.total}} registros",loading:"Carregando, isso pode levar alguns segundos...",noResults:"Não há dados para exibir",refresh:"Atualizar",search:"Pesquisar"};function FormatJsonDateToJavaScriptDate(a){var t=new Date(a);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()}
function openModal(e,a){$("#ModalTitle").val(e+" - DeviceId: "+a),"Details"==e?($("#buttonSave").hide(),$("#DivPainelConfig").hide(),$("#DivPainelLog").show(),$("#grid-data-device-logError").bootgrid({ajax:!0,post:function(){return{id:a}},url:"/Devices/ListLogError",labels:translate,searchSettings:{delay:100,characters:3},converters:{datetime:{from:function(e){return moment(e)},to:function(e){return moment(FormatJsonDateToJavaScriptDate(e)).format("DD/MM/YYYY")}}}}),$("#grid-data-device-log").bootgrid({ajax:!0,post:function(){return{id:a}},url:"/Devices/ListLog",labels:translate,searchSettings:{delay:100,characters:3},converters:{datetime:{from:function(e){return moment(e)},to:function(e){return moment(FormatJsonDateToJavaScriptDate(e)).format("DD/MM/YYYY")}}}}),$("#sortable").sortable({axis:"y",update:function(e,t){var o=$(this).sortable("serialize");$.post("/Devices/UpdateOrderFiles",{id:a,order:o})}}),$("#sortable").disableSelection()):($("#DivPainelConfig").show(),$("#buttonSave").show(),$("#DivPainelLog").hide()),$("#ModalEdit").modal("show")}$(document).ready(function(){$("#SliderTransactionTime").slider({formatter:function(e){return"Time: "+e+" Segunds"}}),$("#SliderTransactionTime").on("slide",function(e){$("#TransactionTimeVal").text(e.value)});var e=$("#grid-data-device").bootgrid({ajax:!0,url:"/Devices/List",labels:translate,searchSettings:{delay:100,characters:3},formatters:{actions:function(e,a){return"<div class='btn-group btn-group-sm' role='group'><a href='#' alt='Details' class='btn btn-info btn-sm' data-command='Details' data-row-id = '"+a.deviceId+"'><span class='glyphicon glyphicon-list'></span></a><a href='#' alt='Edit' class='btn btn-warning btn-sm' data-command='Edit' data-row-id = '"+a.deviceId+"'><span class='glyphicon glyphicon-edit'></span></a><a href='#' alt='Delete' class='btn btn-danger btn-sm' data-command='Delete' data-row-id = '"+a.deviceId+"'><span class='glyphicon glyphicon-trash'></span></a></div>"}},converters:{datetime:{from:function(e){return moment(e)},to:function(e){return moment(FormatJsonDateToJavaScriptDate(e)).format("DD/MM/YYYY")}}}});e.on("loaded.rs.jquery.bootgrid",function(){e.find("a.btn").each(function(a,t){var o=$(t),i=o.data("command"),n=o.data("row-id");o.on("click",function(){"Delete"==i?bootbox.confirm({title:"Excluir",message:"Deseja excluir esse device?<br/> Todo o historico será apagado!",buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancelar'},confirm:{label:'<i class="fa fa-check"></i> Confirmar'}},callback:function(a){a&&$.ajax({url:"/Devices/Delete?id="+n,cache:!1,success:function(a){PleaseWaitHide(),bootbox.alert({title:"Info",message:a}),e.reload()},error:function(a,t,o){PleaseWaitHide(),bootbox.alert({title:"Error",message:a.responseText}),e.reload()}})}}):($("#id").val(n),$("#command").val(i),$("#FormEdit").submit())})})})});